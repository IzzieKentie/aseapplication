<!doctype html>
<html lang="en">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="style.css">
</head>
<body>
<ul class="topnav">
  <li><a href="/home">Home</a></li>
  <li><a href="/profile">Profile</a></li>
    <li><a class="active" href="/feedback">Feedback</a></li>
    <div class="dropdown">
    <button class="dropbtn">
      <li><a href="#events">Events</a></li>
      <i class="fa fa-caret-down"></i>
    </button>
    <div class="dropdown-content">
      <a href="/PastEvents">Past Events</a>
      <a href="/CurrentEvent">Current Event</a>
      <a href="/UpcomingEvents">Upcoming Events</a>
    </div>
  </div> 

  <li class="right"><a href="#Messages">Messages</a></li>
  <li class="right"><a href="#Encyclopedia">Encyclopedia</a></li>
  <li class="right"><a href="/logout">Logout</a></li>
</ul>
  <img class="center" style="width: 8%;" src="ASE_UK_logo_v1.0.png"></li>
   <div class="menu_and_event">
  <div class="flex-feedback-menu">
  <% if(feedback.length){ 
       for(var i = 0;i < feedback.length;i++) { %>
        <form method="POST" action="/selectfeedback">
            <input type = "hidden" name = "selected" value = "<%=feedback[i].feedback_id%>" />
            <div class="flex-feedback-menu-item">
              <input class="select-feedback" type="submit" value="<%=feedback[i].event_name%> from <%=feedback[i].forename%> <%=feedback[i].surname%>"/>
            </div>
        </form>
  <% }
     }else{ %>
      <div class="flex-feedback-menu">
          <div class="flex-feedback-menu-item"><p>No Feedback to Display</p></div>
      </div>
  <% } %>
  </div>
      <div class="flex-feedback-selected">
        <% if(selected.length){ 
        for(var i = 0;i < selected.length;i++) { %>
        <div class="flex-feedback-selected-item" >
          <h3>What you did well:</h3>
          </div>
          <div class="flex-feedback-selected-item" >
          <p><%=selected[i].did_well%></p>
        </div>
       <div class="flex-feedback-selected-item">
          <h3>What you did not do well:</h3>
          </div>
          <div class="flex-feedback-selected-item">
          <p><%=selected[i].not_well%></p>
        </div>
        <div class="flex-feedback-selected-item">
          <h3>What to improve on</h3>
          </div>
          <div class="flex-feedback-selected-item">
          <p><%=selected[i].improvements%></p>
        </div>
        <% }} else { %>
    <div class="flex-feedback-selected-item">No Feedback to Display</div>
  <% } %>
      </div>
      <div class="flex-feedback-menu">
        <div class="flex-feedback-menu-item">
          <h3>Feedback Requests</h3>
          <% if(requests.length){ 
            for(var i = 0;i < requests.length;i++) { %>
              <form method="POST" action="/givefeedback">
              <h3><b>Please provide feedback for: <%=requests[i].event_name%> - <%=requests[i].forename%> <%=requests[i].surname%></b></h3>
              <p>What did they do well?</p>
              <input type="hidden" name="event_id" value="<%=requests[i].event_id%>"></input>
              <input type="hidden" name="requester_id" value="<%=requests[i].requester_id%>"></input>
              <input type="hidden" name="giver_id" value="<%=requests[i].giver_id%>"></input>
              <input type="hidden" name="request_id" value="<%=requests[i].request_id%>"></input>
              <input type="text" name="did_well"></input>
              <p>What did they not do well?</p>
              <input type="text" name="not_well"></input>
              <p>What improvements can be made?</p>
              <input type="text" name="improvements"></input>
            <div class="flex-feedback-menu-item">
              <button class="select-feedback" type="submit">Complete</button>
            </div>
          </form>
          <% }}%>
        </div> 
      </div>
      <div class="flex-feedback-menu">
        <div class="flex-feedback-menu-item" style="padding-right: 2%">
          <h3>Request feedback</h3>
          <form method="POST" action="/feedbackRequest">
            <h3><b>Event: </b></h3>
            <select id="feedback_event" name="feedback_event">
              <% if(events.length){ 
                for(var i = 0;i < events.length;i++) { %>
                <option value="<%=events[i].event_id%>"><%=events[i].event_name%></option>
              <% }}%>
            </select>    
            <h3><b>Request Feedback From: </b></h3>
            <select id="feedback_from" name="feedback_from">
              <% if(team.length){ 
                for(var i = 0;i < team.length;i++) { %>
                <option value="<%=team[i].ID%>"><%=team[i].forename%> <%=team[i].surname%></option>
              <% }}%>
            </select> 
            <div class="flex-feedback-menu-item">
              <button class="select-feedback" type="submit">Send</button>
            </div>
          </form>
        </div>
      </div>
  </div>
</div>
</body>
</html>
